/* Icon Picker */

(function($) {

	$.fn.iconPicker = function( options ) {
		var options = ['fa','fa']; // default font set
		var icons;
		$list = $('');
		function font_set() {
			icons = [
				"address-book",
				"address-book-o",
				"address-card",
				"address-card-o",
				"adjust",
				"align-center",
				"align-justify",
				"align-left",
				"align-right",
				"ambulance",
				"american-sign-language-interpreting",
				"anchor",
				"angellist",
				"angle-double-down",
				"angle-double-left",
				"angle-double-right",
				"angle-double-up",
				"angle-down",
				"angle-left",
				"angle-right",
				"angle-up",
				"archive",
				"area-chart",
				"arrow-circle-down",
				"arrow-circle-left",
				"arrow-circle-o-down",
				"arrow-circle-o-left",
				"arrow-circle-o-right",
				"arrow-circle-o-up",
				"arrow-circle-right",
				"arrow-circle-up",
				"arrow-down",
				"arrow-left",
				"arrow-right",
				"arrow-up",
				"arrows",
				"arrows-alt",
				"arrows-h",
				"arrows-v",
				"asl-interpreting",
				"assistive-listening-systems",
				"asterisk",
				"at",
				"audio-description",
				"automobile",
				"backward",
				"balance-scale",
				"ban",
				"bandcamp",
				"bank",
				"bar-chart",
				"bar-chart-o",
				"barcode",
				"bars",
				"bath",
				"bathtub",
				"battery",
				"battery-0",
				"battery-1",
				"battery-2",
				"battery-3",
				"battery-4",
				"battery-empty",
				"battery-full",
				"battery-half",
				"battery-quarter",
				"battery-three-quarters",
				"bed",
				"beer",
				"bell",
				"bell-o",
				"bell-slash",
				"bell-slash-o",
				"bicycle",
				"binoculars",
				"birthday-cake",
				"black-tie",
				"blind",
				"bluetooth",
				"bluetooth-b",
				"bold",
				"bolt",
				"bomb",
				"book",
				"bookmark",
				"bookmark-o",
				"braille",
				"briefcase",
				"building",
				"building-o",
				"bullhorn",
				"bullseye",
				"bus",
				"cab",
				"calculator",
				"calendar",
				"calendar-check-o",
				"calendar-minus-o",
				"calendar-o",
				"calendar-plus-o",
				"calendar-times-o",
				"camera",
				"camera-retro",
				"car",
				"caret-down",
				"caret-left",
				"caret-right",
				"caret-square-o-down",
				"caret-square-o-left",
				"caret-square-o-right",
				"caret-square-o-up",
				"caret-up",
				"cart-arrow-down",
				"cart-plus",
				"certificate",
				"chain",
				"chain-broken",
				"check",
				"check-circle",
				"check-circle-o",
				"check-square",
				"check-square-o",
				"chevron-circle-down",
				"chevron-circle-left",
				"chevron-circle-right",
				"chevron-circle-up",
				"chevron-down",
				"chevron-left",
				"chevron-right",
				"chevron-up",
				"child",
				"circle",
				"circle-o",
				"circle-o-notch",
				"circle-thin",
				"clipboard",
				"clock-o",
				"clone",
				"close",
				"cloud",
				"cloud-download",
				"cloud-upload",
				"code",
				"code-fork",
				"codepen",
				"codiepie",
				"coffee",
				"cog",
				"cogs",
				"columns",
				"comment",
				"comment-o",
				"commenting",
				"commenting-o",
				"comments",
				"comments-o",
				"compass",
				"compress",
				"copy",
				"copyright",
				"creative-commons",
				"credit-card",
				"credit-card-alt",
				"crop",
				"crosshairs",
				"cube",
				"cubes",
				"cut",
				"cutlery",
				"dashboard",
				"database",
				"deaf",
				"deafness",
				"dedent",
				"delicious",
				"desktop",
				"deviantart",
				"diamond",
				"dollar",
				"dot-circle-o",
				"download",
				"drivers-license",
				"drivers-license-o",
				"edit",
				"eercast",
				"eject",
				"ellipsis-h",
				"ellipsis-v",
				"envelope",
				"envelope-o",
				"envelope-open",
				"envelope-open-o",
				"envelope-square",
				"eraser",
				"etsy",
				"eur",
				"euro",
				"exchange",
				"exclamation",
				"exclamation-circle",
				"exclamation-triangle",
				"expand",
				"external-link",
				"external-link-square",
				"eye",
				"eye-slash",
				"eyedropper",
				"fa",
				"fast-backward",
				"fast-forward",
				"fax",
				"feed",
				"female",
				"fighter-jet",
				"file",
				"file-archive-o",
				"file-audio-o",
				"file-code-o",
				"file-excel-o",
				"file-image-o",
				"file-movie-o",
				"file-o",
				"file-pdf-o",
				"file-photo-o",
				"file-picture-o",
				"file-powerpoint-o",
				"file-sound-o",
				"file-text",
				"file-text-o",
				"file-video-o",
				"file-word-o",
				"file-zip-o",
				"files-o",
				"film",
				"filter",
				"fire",
				"fire-extinguisher",
				"flag",
				"flag-checkered",
				"flag-o",
				"flash",
				"flask",
				"flickr",
				"floppy-o",
				"folder",
				"folder-o",
				"folder-open",
				"folder-open-o",
				"font",
				"forward",
				"free-code-camp",
				"frown-o",
				"futbol-o",
				"gamepad",
				"gavel",
				"gbp",
				"gear",
				"gears",
				"genderless",
				"get-pocket",
				"gift",
				"gittip",
				"glass",
				"globe",
				"graduation-cap",
				"gratipay",
				"group",
				"hand-grab-o",
				"hand-lizard-o",
				"hand-o-down",
				"hand-o-left",
				"hand-o-right",
				"hand-o-up",
				"hand-paper-o",
				"hand-peace-o",
				"hand-pointer-o",
				"hand-rock-o",
				"hand-scissors-o",
				"hand-spock-o",
				"hand-stop-o",
				"handshake-o",
				"hard-of-hearing",
				"hashtag",
				"hdd-o",
				"header",
				"headphones",
				"heart",
				"heart-o",
				"heartbeat",
				"history",
				"home",
				"hospital-o",
				"hotel",
				"hourglass",
				"hourglass-1",
				"hourglass-2",
				"hourglass-3",
				"hourglass-end",
				"hourglass-half",
				"hourglass-o",
				"hourglass-start",
				"houzz",
				"i-cursor",
				"id-badge",
				"id-card",
				"id-card-o",
				"image",
				"inbox",
				"indent",
				"industry",
				"info",
				"info-circle",
				"institution",
				"intersex",
				"italic",
				"jpy",
				"key",
				"keyboard-o",
				"language",
				"laptop",
				"leanpub",
				"legal",
				"lemon-o",
				"level-down",
				"level-up",
				"life-bouy",
				"life-buoy",
				"life-ring",
				"life-saver",
				"lightbulb-o",
				"line-chart",
				"link",
				"list",
				"list-alt",
				"list-ol",
				"list-ul",
				"location-arrow",
				"lock",
				"long-arrow-down",
				"long-arrow-left",
				"long-arrow-right",
				"long-arrow-up",
				"low-vision",
				"magic",
				"magnet",
				"mail-forward",
				"mail-reply",
				"mail-reply-all",
				"male",
				"map",
				"map-marker",
				"map-o",
				"map-pin",
				"map-signs",
				"mars",
				"mars-double",
				"mars-stroke",
				"mars-stroke-h",
				"mars-stroke-v",
				"medkit",
				"meh-o",
				"mercury",
				"microchip",
				"microphone",
				"microphone-slash",
				"minus",
				"minus-circle",
				"minus-square",
				"minus-square-o",
				"mixcloud",
				"mobile",
				"mobile-phone",
				"money",
				"moon-o",
				"mortar-board",
				"motorcycle",
				"mouse-pointer",
				"music",
				"navicon",
				"neuter",
				"newspaper-o",
				"object-group",
				"object-ungroup",
				"odnoklassniki",
				"odnoklassniki-square",
				"outdent",
				"pagelines",
				"paint-brush",
				"paper-plane",
				"paper-plane-o",
				"paperclip",
				"paragraph",
				"paste",
				"pause",
				"pause-circle",
				"pause-circle-o",
				"paw",
				"pencil",
				"pencil-square",
				"pencil-square-o",
				"percent",
				"phone",
				"phone-square",
				"photo",
				"picture-o",
				"pie-chart",
				"plane",
				"play",
				"play-circle",
				"play-circle-o",
				"plug",
				"plus",
				"plus-circle",
				"plus-square",
				"plus-square-o",
				"podcast",
				"power-off",
				"print",
				"puzzle-piece",
				"qrcode",
				"question",
				"question-circle",
				"question-circle-o",
				"quote-left",
				"quote-right",
				"random",
				"recycle",
				"refresh",
				"registered",
				"remove",
				"reorder",
				"repeat",
				"reply",
				"reply-all",
				"retweet",
				"rmb",
				"road",
				"rocket",
				"rotate-left",
				"rotate-right",
				"rss",
				"rss-square",
				"s15",
				"save",
				"scissors",
				"search",
				"search-minus",
				"search-plus",
				"send",
				"send-o",
				"server",
				"share",
				"share-alt",
				"share-alt-square",
				"share-square",
				"share-square-o",
				"shield",
				"ship",
				"shopping-bag",
				"shopping-basket",
				"shopping-cart",
				"shower",
				"sign-in",
				"sign-language",
				"sign-out",
				"signal",
				"signing",
				"sitemap",
				"skyatlas",
				"sliders",
				"smile-o",
				"snowflake-o",
				"soccer-ball-o",
				"sort",
				"sort-alpha-asc",
				"sort-alpha-desc",
				"sort-amount-asc",
				"sort-amount-desc",
				"sort-asc",
				"sort-desc",
				"sort-down",
				"sort-numeric-asc",
				"sort-numeric-desc",
				"sort-up",
				"space-shuttle",
				"spoon",
				"square",
				"square-o",
				"stack-exchange",
				"stack-overflow",
				"star",
				"star-half",
				"star-half-empty",
				"star-half-full",
				"star-half-o",
				"star-o",
				"step-backward",
				"step-forward",
				"stethoscope",
				"sticky-note",
				"sticky-note-o",
				"stop",
				"stop-circle",
				"stop-circle-o",
				"subscript",
				"subway",
				"suitcase",
				"sun-o",
				"superpowers",
				"superscript",
				"support",
				"table",
				"tablet",
				"tachometer",
				"tag",
				"tags",
				"tasks",
				"taxi",
				"television",
				"tencent-weibo",
				"terminal",
				"text-height",
				"text-width",
				"th",
				"th-large",
				"th-list",
				"thermometer",
				"thermometer-0",
				"thermometer-1",
				"thermometer-2",
				"thermometer-3",
				"thermometer-4",
				"thermometer-empty",
				"thermometer-full",
				"thermometer-half",
				"thermometer-quarter",
				"thermometer-three-quarters",
				"thumb-tack",
				"thumbs-down",
				"thumbs-o-down",
				"thumbs-o-up",
				"thumbs-up",
				"ticket",
				"times",
				"times-circle",
				"times-circle-o",
				"times-rectangle",
				"times-rectangle-o",
				"tint",
				"toggle-down",
				"toggle-left",
				"toggle-off",
				"toggle-on",
				"toggle-right",
				"toggle-up",
				"trademark",
				"train",
				"transgender",
				"transgender-alt",
				"trash",
				"trash-o",
				"tree",
				"trello",
				"trophy",
				"truck",
				"tty",
				"tv",
				"umbrella",
				"underline",
				"undo",
				"universal-access",
				"university",
				"unlink",
				"unlock",
				"unlock-alt",
				"unsorted",
				"upload",
				"usb",
				"usd",
				"user",
				"user-circle",
				"user-circle-o",
				"user-md",
				"user-o",
				"user-plus",
				"user-secret",
				"user-times",
				"users",
				"vcard",
				"vcard-o",
				"venus",
				"venus-double",
				"venus-mars",
				"video-camera",
				"volume-control-phone",
				"volume-down",
				"volume-off",
				"volume-up",
				"warning",
				"wheelchair",
				"wheelchair-alt",
				"wifi",
				"window-close",
				"window-close-o",
				"window-maximize",
				"window-minimize",
				"window-restore",
				"wrench"
			];
	};
	font_set();

	function build_list($popup,$button,clear) {
	  $list = $popup.find('.icon-picker-list');
	  if (clear==1) {
			$list.empty(); // clear list //
	  }
	  for (var i in icons) {
		  $list.append('<li data-icon="'+icons[i]+'"><a href="#" title="'+icons[i]+'"><span class="fa fa-'+icons[i]+'"></span></a></li>');
	  };
		$('a', $list).click(function(e) {
			e.preventDefault();
			var title = $(this).attr("title");
			$target.val(title);
			$button.removeClass().addClass("button icon-picker fa fa-"+title);
			removePopup();
		});
	};

			function removePopup(){
				$(".icon-picker-container").remove();
			}


			$button = $('.icon-picker');
			$button.each( function() {
				$(this).on('click.iconPicker', function() {
					createPopup($(this));
				});
			});


			function createPopup($button) {
				$target = $($button.data('target'));
				$popup = $('<div class="icon-picker-container"> \
						<div class="icon-picker-control" /> \
						<ul class="icon-picker-list" /> \
					</div>')
					.css({
						'top': $target.position().top,
						'left': $target.position().left
					});
				build_list($popup,$button,0);
				var $control = $popup.find('.icon-picker-control');
				$control.html('<span class="dashicons dashicons-no-alt icon-picker-close"></span>'+
				'<input type="text" class="" placeholder="Search" />'+
				'');

				$popup.appendTo('#ignation-iot-wrap').show();

				$container_width = $('body').find('.icon-picker-container').width() - 15;
				$('.icon-picker-container').find('.icon-picker-control').css("width", $container_width);

				$('input', $control).on('keyup', function(e) {
					var search = $(this).val();
					if (search === '') {
						//show all again
						$('li:lt(608)', $list).show();
					} else {
						$('li', $list).each(function() {
							if ($(this).data('icon').toString().toLowerCase().indexOf(search.toLowerCase()) !== -1) {
								$(this).show();
							} else {
								$(this).hide();
							}
						});
					}
				});

				$('.icon-picker-close').click(function(){
					removePopup();
				});

				$(document).mouseup(function (e){
					if (!$popup.is(e.target) && $popup.has(e.target).length === 0) {
						removePopup();
					}
				});
			}
	}


	$(function() {
		$('.icon-picker').iconPicker();
	});

}(jQuery));
